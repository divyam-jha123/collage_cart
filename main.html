<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CampusConnect â€” Sell & Collaborate (Vedam)</title>
    <meta name="description" content="Vedam campus sell & collaborate single-page app (localStorage)" />
    <meta name="description" content="Vedam campus sell & collaborate single-page app (localStorage)" />
    <link rel="stylesheet" href="./main.css">
</head>

<body>
    <div class="app-shell">
        <aside class="sidebar" id="app-sidebar">
            <div style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid rgba(15,23,42,0.08);">
                <div class="brand" style="padding: 0;">
                    <div class="project" style="font-size: 20px;">College Cart</div>
                    <div class="college" style="font-size: 12px;">Vedam School</div>
                </div>
            </div>

            <!-- Profile Card -->
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar" id="user-avatar">U</div>
                    <div class="profile-info">
                        <h3 id="user-name">User</h3>
                        <p id="user-college">Vedam School</p>
                    </div>
                </div>
                <div class="stat-row">
                    <div class="stat-item">
                        <div class="stat-val" id="stat-products">0</div>
                        <div class="stat-label">Products</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-val" id="stat-collabs">0</div>
                        <div class="stat-label">Invites</div>
                    </div>
                </div>
                <button class="btn btn-ghost" style="width:100%;margin-top:12px">Edit Profile</button>
            </div>

            <!-- Activity Panel -->
            <div class="activity-card" style="margin-top:20px">
                <h3 style="margin:0 0 16px;font-size:16px">Recent Activity</h3>
                <ul class="activity-list" id="activity-list">
                    <li class="activity-item">
                        <div class="activity-icon">ðŸ‘‹</div>
                        <div class="activity-content">
                            <div class="activity-text">Welcome to CampusConnect!</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Logout Button -->
            <div style="margin-top: auto;">
                <button id="logout-btn" class="btn btn-ghost"
                    style="width: 100%; color: #ef4444; border-color: rgba(239, 68, 68, 0.2); display: flex; align-items: center; justify-content: center; gap: 8px;">
                    <span>ðŸšª</span> Log Out
                </button>
            </div>
        </aside>

        <div class="main-content">
            <header class="app-header" role="banner">
                <div class="header-inner">
                    <div style="display:flex;align-items:center;gap:12px;position:relative;z-index:50">
                        <button class="icon-btn" id="sidebar-toggle" title="Toggle Sidebar">â˜°</button>
                    </div>

                    <div class="brand" aria-hidden="false"
                        style="position: absolute; left: 50%; transform: translateX(-50%); white-space: nowrap;">
                        <div class="project" style="font-weight: 700;">ADYPU Campus</div>
                    </div>

                    <div class="header-actions" role="navigation" aria-label="Header actions">
                        <button class="btn btn-ghost" id="btn-buy" title="Scroll to items">Buy</button>
                        <!-- changed Sell -> Collaboration -->
                        <button class="btn btn-primary" id="btn-collab"
                            title="Go to collaboration">Collaboration</button>
                        <!-- theme toggle slider -->
                        <div class="theme-switch-wrapper" id="theme-toggle-wrapper" title="Toggle theme">
                            <label class="theme-switch" for="checkbox">
                                <input type="checkbox" id="checkbox" />
                                <div class="slider round"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </header>

            <main class="container" id="main">
                <!-- ROW 2 Sell Section -->
                <section class="row sell-row" id="sell-section" aria-labelledby="sell-title">
                    <h2 id="sell-title">Items for Sale</h2>
                    <div style="display:flex;gap:10px;align-items:center">
                        <input id="product-search" class="search-input"
                            placeholder="Search products (title/description)" />
                        <button class="btn btn-primary" id="open-sell"
                            onclick="window.openSellModal && window.openSellModal()">+ Sell Your Product</button>
                    </div>
                </section>

                <!-- ROW 3 Product Grid -->
                <section id="products" class="row" aria-labelledby="products-title">
                    <div id="product-grid" class="product-grid" role="list"></div>
                    <div id="products-empty" class="empty-state" style="display:none;margin-top:12px">No products yet.
                        Click
                        <strong>+ Sell Your Product</strong> to add the first item.
                    </div>
                </section>

                <!-- ROW 4 Collaboration heading -->
                <section class="row" aria-labelledby="collab-title">
                    <div style="display:flex;justify-content:space-between;align-items:center">
                        <h2 id="collab-title">Collaboration / Invitations</h2>
                        <div style="display:flex;gap:10px;align-items:center">
                            <!-- removed fixed category chips - category will be entered by user -->
                            <button class="btn btn-primary" id="open-collab">+ Create Invite</button>
                        </div>
                    </div>
                </section>

                <!-- ROW 5 Collaboration Grid -->
                <section id="collabs" class="row" aria-labelledby="collab-list">
                    <div id="collab-grid" class="collab-grid" role="list"></div>
                    <div id="collabs-empty" class="empty-state" style="display:none;margin-top:12px">No collaboration
                        posts yet.
                        Click <strong>+ Create Invite</strong> to post one.</div>
                </section>
            </main>

            <footer class="simple-footer">
                <div>Â© 2025 College Cart Portal. All rights reserved.</div>
                <div class="footer-links">
                    <a href="#">Privacy</a>
                    <a href="#">Terms</a>
                    <a href="#">Support</a>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal-backdrop" class="modal-backdrop" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <!-- dynamic content -->
            <div id="modal-content"></div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
        // Inline Theme Toggle Handler for Robustness
        (function () {
            const btn = document.getElementById('theme-toggle');
            const storageKey = 'campus_connect_theme';
            const toggleWrapper = document.getElementById('theme-toggle-wrapper');
            const checkbox = document.getElementById('checkbox');

            function applyTheme() {
                const theme = localStorage.getItem(storageKey) || 'light';
                if (theme === 'dark') {
                    document.body.classList.add('dark');
                    if (checkbox) checkbox.checked = true;
                } else {
                    document.body.classList.remove('dark');
                    if (checkbox) checkbox.checked = false;
                }
            }

            if (checkbox) {
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        document.body.classList.add('dark');
                        localStorage.setItem(storageKey, 'dark');
                    } else {
                        document.body.classList.remove('dark');
                        localStorage.setItem(storageKey, 'light');
                    }
                });
            }

            // Apply initial theme
            applyTheme();
            applyTheme();


            // Inline Sidebar Toggle Handler
            const sidebarBtn = document.getElementById('sidebar-toggle');
            if (sidebarBtn) {
                const newSidebarBtn = sidebarBtn.cloneNode(true);
                sidebarBtn.parentNode.replaceChild(newSidebarBtn, sidebarBtn);
                newSidebarBtn.addEventListener('click', function () {
                    const sidebar = document.getElementById('app-sidebar');
                    if (sidebar) sidebar.classList.toggle('collapsed');
                });
            }
        })();
    </script>
    <script type="module" src="./main.js"></script>
</body>

</html>